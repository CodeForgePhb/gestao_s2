<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/docente.css">
    <title>Gestão S</title>
</head>
<body>
    <div class="sidebar">
        <div>
            <div class="sidbox">
                <a id="active">Docente<img src="./assets/icons/docente.svg"></a>
            </div>
            <div class="sidbox">
                <a class="no-active">Coordenação<img src="./assets/icons/coordenacao.svg"></a>
            </div>
            <div class="sidbox">
                <a class="no-active">Gestão<img src="./assets/icons/gestao.svg"></a>
            </div>
            <div class="sidbox">
                <a class="no-active">Setor de Compras<img src="./assets/icons/setor-compras.svg"></a>
            </div>
        </div>

        <!-- Área de Perfil -->

        <div class="profile">
            <div class="avatar">
                <img src="" alt="Imagem do Usuário" class="profile-image" id="img-perfil">
            </div>
            <div class="info">
                <span class="name saudacao">Name</span>
                <span class="func">Docente</span>
            </div>
            <div class="logout">
                <button><i class="fa-solid fa-right-from-bracket" style="color: #ffffff;" id="btnLogout"></i></button>
                <button id="openProfileModal"><i class="fa-solid fa-gear" style="color: #ffffff;"
                        id="perfil"></i></button>
            </div>
        </div>
        
    </div>
    <div class="main">
        <div class="main-header">
            <div class="general">
                <h2 class="saudacao">Olá, </h2>
                <div class="tabs">
                    <div class="tab cursos active" data-tab="cursos">Cursos</div>
                    <div class="tab status" data-tab="status" id="tabStatus">Status</div>
                </div>
            </div>
            <div><img src="./assets/logo_gestao_s.svg" alt="logo_gestao_s" class="logo"></div>
        </div>
        <section class="content active" id="cursos">
            <div class="nome-com-linha">
                <span class="nome">Cursos Vigentes</span>
            </div>
            <div class="courses" id="courses">
                <div class="loading">
                    <div class="loader"></div>
                </div>
            </div>
            <div class="nome-com-linha">
                <span class="nome title">Cursos Concluídos</span>
            </div>
            <form class="search-filters" id="buscar-cursos-concluidos">
                <input type="date" placeholder="dd/mm/aaaa" id="date1">
                <input type="date" placeholder="dd/mm/aaaa" id="date2">
                <button>Buscar</button> 
            </form>
            <input class="search-courses" type="text" id="busca-por-cursos-concluidos" placeholder="Busque por cursos concluídos...">
            <div id="cursos-concluidos" class="content-wrapper">
                <div class="loading">
                    <div class="loader"></div>
                </div>
                <!-- dados da api -->
            </div>
        </section>
        <section class="content" id="status">
            <div class="nome-com-linha">
                <span class="nome">Em andamento</span>
            </div>
            <div class="courses ">
                <div class="course">
                    <div class="accordion-header">
                        <span>Administração</span>
                        <span>Nível B - Em Análise</span>
                        <span class="arrow"><i class="fa-solid fa-chevron-down" style="color: #808080;"></i></span>
                    </div>
                    <div class="accordion-content">
                        <div class="inf">
                            <span><strong>Data:</strong> 01/02/2025 13:20</span>
                            <span><strong>Departamento:</strong> Coordenação</span>
                        </div>
                        <div class="inf">
                            <span><strong>Cód:</strong> 000001</span>
                            <span><strong>Turno:</strong> Manhã</span>
                            <span><strong>Período:</strong> 01/01/2025 à 01/07/2026</span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="nome-com-linha">
                <span class="nome title">Concluídos</span>
            </div>
            <div class="search-filters">
                <input type="date" placeholder="dd/mm/aaaa">
                <input type="date" placeholder="dd/mm/aaaa">
                <input type="text" placeholder="Busque por cursos concluídos...">
                <button>Buscar</button>
            </div>
            <div class="content-wrapper" id="content-wrapper">
                <div>
                    <div class="course-item accordion-header">
                        <h2 class="course-title">Introdução à Programação</h2>
                        <p class="course-date"> <strong>Concluído<i class="fa-solid fa-check"></i></strong></p>
                    </div>
                    <div class="accordion-content course-c">
                        <div class="inf">
                            <span><strong>Nível B:</strong> Em Análise</span>
                            <span><strong>Data:</strong> 01/02/2025 13:20</span>
                            <span><strong>Departamento:</strong> Coordenação</span>
                        </div>
                        <div class="inf">
                            <span><strong>Cód:</strong> 000001</span>
                            <span><strong>Turno:</strong> Manhã</span>
                            <span><strong>Período:</strong> 01/01/2025 à 01/07/2026</span>
                        </div>
                    </div>
                </div>
                <div class="course-item">
                    <h2 class="course-title">Design de Interfaces</h2>
                    <p class="course-date">Concluído em 15/03/2023</p>
                </div>
                <div class="course-item">
                    <h2 class="course-title">Machine Learning</h2>
                    <p class="course-date">Concluído em 10/06/2023</p>
                </div>
                <div class="course-item">
                    <h2 class="course-title">Machine Learning</h2>
                    <p class="course-date">Concluído em 10/06/2023</p>
                </div>
                <div class="course-item">
                    <h2 class="course-title">Machine Learning</h2>
                    <p class="course-date">Concluído em 10/06/2023</p>
                </div>
                <div class="course-item">
                    <h2 class="course-title">Machine Learning</h2>
                    <p class="course-date">Concluído em 10/06/2023</p>
                </div>
            </div>
        </section>
    </div>
    <!-- MODAL SOLICITAÇÕES -->
    <!-- MODAL SOLICITAÇÕES -->
    <div class="modal-s">
        <div class="modal" id="kit-Modal">
            <div class="modal-header">
                <img src="./assets/logo-2.svg" class="logo-2" alt="logo">
                <h2>Solicitação dos Kits</h2>
            </div>
            <div class="modal-body">
                <div class="search-bar">
                    <select id="selecao" required>
                    </select>
                    <button id="buscar-materiais">Buscar</button>
                    <div id="result"></div>
                </div>
                <div class="info info2" id="info">
                    <!-- conteudo da api -->
                </div>
                <table class="table" id="table-materiais">
                    <thead>
                        <tr><th colspan="6" style="text-align: center; border: 1px solid #000;"id="name-kit"></th></tr>
                        <tr>
                            <th colspan="1">COD. PROTHEUS</th>
                            <th colspan="1">PRODUTO</th>
                            <th colspan="1">QUANTIDADE MAX</th>
                            <th colspan="1">UNIDADE</th>
                            <th colspan="1">SALDO</th>
                            <th colspan="1">QUANTIDADE REQUERIDA</th>
                        </tr>
                    </thead>
                    <tbody id="body-table">
                        <!-- dados do servidor -->
                    </tbody>
                </table>
                <div class="additional-materials">
                    <label for="additional">MATERIAIS ADICIONAIS</label>
                    <textarea id="additional"
                        placeholder="Digite o(s) produto(s) e a(s) quantidade(s)"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel" onclick="closeModal()">Cancelar</button>
                <button id="openModalBtn" type="submit">Enviar</button>
            </div>
        </div>
    </div>
    <!-- Primeiro Modal: Confirmação -->
    <div id="confirmModal" class="modal-2">
        <div class="modal-content">
            <div class="modal-header">
            </div>
            <p>Tem certeza que deseja enviar?</p>
            <div class="modal-footer-2">
                <button id="cancelBtn" class="cancel">Não</button>
                <button id="sendBtn">Sim</button>
            </div>
        </div>
    </div>
    <!-- Segundo Modal: Sucesso -->
    <div id="successModal" class="modal-2">
        <div class="modal-content-2">
            <div class="modal-box"></div>
            <div class="checkmark-container">
                <div class="checkmark-circle"></div>
                <div class="checkmark-container">
                    <svg viewBox="0 0 100 100">
                        <path class="check" d="M30 52 L43 65 L70 35"></path>
                    </svg>
                </div>
            </div>
            <div class="okBtn-box">
                <p>Solicitação enviada com Sucesso!</p>
                <button id="okBtn">OK</button>
            </div>
        </div>
    </div>
    <!-- MODAL CONFIG -->
    <div class="custom-modal" id="profileModal">
        <div class="custom-modal-content">
            <div class="modal-header">
                <h2>PERFIL</h2>
                <div class="close-button">
                    <span class="custom-close" id="closeProfileModal">
                        <i class="fa-solid fa-x" style="color: #808080;"></i>
                    </span>
                </div>
            </div>
            <div class="fot">
                <img src="" alt="Foto de Perfil" id="profileImage">
            </div>
            <div class="modal-body">
                <p>Imagem do Perfil:</p>
                <div class="img-troca">
                    <label for="newProfileImage" class="Profile">
                        <i class="fa-solid fa-upload" style="color: #ffffff;"></i>
                        Alterar Imagem
                    </label>
                    <input type="file" id="newProfileImage" class="custom-file-input">
                </div>
                <button for="SaveProfileImage" class="custom-file-label" id="saveProfileImage">Salvar</button>
                 <div class="container">
                    <h1 id="SignatureTittle">Assinatura Digital</h1>
                    <p>Registre a sua assinatura digital abaixo.</p>
                    <div class="signature-container" id="signature-container">
                        <canvas id="signatureCanvas"></canvas>
                        <div>
                            <button class="btn1" id="limpar">Limpar</button>
                            <button id="saveSignatureImage">Salvar Assinatura</button>
                            <abbr
                                title="Para armazenar sua assinatura, clique em 'Gerar img' e depois em 'Salvar Assinatura'.">
                                <i class="fa-solid fa-info" style="color: #808080;" id="signatureInfo"></i>
                            </abbr>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Abrir e fechar o modal
        document.getElementById("openProfileModal").addEventListener("click", function () {
            document.getElementById("profileModal").style.display = "block";
        });
        document.getElementById("closeProfileModal").addEventListener("click", function () {
            document.getElementById("profileModal").style.display = "none";
        });
        // Fechar o modal ao clicar fora do conteúdo
        window.addEventListener("click", function (event) {
            const modal = document.getElementById("profileModal");
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });
        function decreaseValue(button) {
            const input = button.nextElementSibling;
            const value = parseInt(input.value);
            if (value > 0) {
                input.value = value - 1;
            }
        }
        function increaseValue(button) {
            const input = button.previousElementSibling;
            input.value = parseInt(input.value) + 1;
        }
        function validateValue(input) {
            if (input.value < 0) {
                input.value = 0;
            }
        }
        function deleteRow(button) {
            const row = button.closest('tr'); // Localiza a linha mais próxima do botão clicado
            row.remove(); // Remove a linha
        }
        // Seleciona elementos do DOM
        const confirmModal = document.getElementById('confirmModal');
        const successModal = document.getElementById('successModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const sendBtn = document.getElementById('sendBtn');
        const okBtn = document.getElementById('okBtn');
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.content');
        // Função para abrir o modal principal       
        function openModal() {
            const kitModal = document.getElementById('kit-Modal').style.display = 'block';
        }
        // Fecha o modal principal
        function closeModal() {
            const kitModal = document.getElementById('kit-Modal').style.display = 'none';
            const tbody = document.getElementById('body-table');
            const result = document.getElementById('result');
            result.innerHTML = '';
            tbody.innerHTML = '';
        }
        // Fecha o modal de confirmação
        cancelBtn.addEventListener('click', () => {
            confirmModal.style.display = 'none';
        });
        // Abre o modal de confirmação
        document.getElementById('openModalBtn').addEventListener('click', () => {
            confirmModal.style.display = 'flex';
        });
        // Abre o modal de sucesso
        sendBtn.addEventListener('click', () => {
            confirmModal.style.display = 'none';
            successModal.style.display = 'flex';
            closeModal();
        });
        // Função para ativar uma aba específica
        function activateTab(tabName) {
            // Remove a classe ativa de todas as abas e conteúdos
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            // Adiciona a classe ativa à aba e ao conteúdo correspondente
            const targetTab = document.querySelector(`.tab.${tabName}`);
            const targetContent = document.getElementById(tabName);
            if (targetTab && targetContent) {
                targetTab.classList.add('active');
                targetContent.classList.add('active');
            }
        }
        // Redireciona para a aba "Status" e fecha todos os modais ao clicar em OK
        okBtn.addEventListener('click', () => {
            successModal.style.display = 'none'; // Fecha o modal de sucesso
            const kitModal = document.getElementById('kitModal');
            if (kitModal) {
                kitModal.style.display = 'none'; // Fecha o modal principal de solicitação
            }
            activateTab('status'); // Ativa a aba "Status" e seu conteúdo
        });
        // Gerencia cliques manuais nas abas
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remover a classe ativa de todas as abas e conteúdos
                tabs.forEach(t => t.classList.remove('active'));
                contents.forEach(c => c.classList.remove('active'));
                // Adicionar a classe ativa ao botão clicado e ao conteúdo correspondente
                tab.classList.add('active');
                const target = document.getElementById(tab.dataset.tab);
                target.classList.add('active');
            });
        });
        //FIM DO SCRIPT PARA INTERAÇÕES DA PÁGINA DOCENTE.HTML ----------------------------------------------------
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
    <script type="module" src="./js/docente.js"></script>
    <script type="module" src="./api.js"></script>

</body>

</html>